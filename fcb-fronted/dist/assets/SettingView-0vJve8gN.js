import{b as U,E as k}from"./el-input-DklOLKsm.js";import{E as w,a as z}from"./el-form-item-uebD4Mim.js";import"./el-tag-m5-RVRsg.js";import{a as S,E as h}from"./el-select-3CzptGtE.js";import"./el-popper-CE96w3Lg.js";import{d as A,a8 as E,t as C,e as D,w as s,af as g,o as V,C as e,g as o,W as i,a1 as b,$ as m,Y as B,Z as M,aG as v}from"./index-B8Am18SQ.js";import"./_baseClone-CCxqJySw.js";const N={style:{display:"flex",height:"38px",width:"45%"}},T={style:{display:"flex",height:"38px","margin-left":"20px"}},c={style:{"margin-left":"0.4rem"}},I={style:{"margin-left":"0.4rem"}},F={style:{"margin-left":"0.4rem"}},K={key:0},O={style:{display:"flex",height:"38px"}},q={style:{"margin-right":"0.4rem"}},G={style:{width:"200px","margin-left":"0.4rem"}},W={style:{display:"flex",height:"38px"}},Y={style:{width:"3rem","margin-right":"0.4rem"}},Z={style:{width:"200px","margin-left":"0.4rem"}},$={style:{display:"flex",height:"38px"}},j={style:{"margin-right":"0.4rem"}},H={style:{width:"200px","margin-left":"0.4rem"}},J={style:{display:"flex",height:"38px"}},L={style:{width:"3rem","margin-right":"0.4rem"}},P={style:{width:"200px","margin-left":"0.4rem"}},se=A({__name:"SettingView",setup(Q){const{t:n}=E(),l=C({name:"",description:"",file_storage:"",expireStyle:[],admin_token:"",robotsText:"",keywords:"",notify_title:"",notify_content:"",openUpload:1,uploadSize:1,uploadMinute:1,max_save_seconds:0,opacity:.9,s3_access_key_id:"",background:"",showAdminAddr:0,page_explain:"",s3_secret_access_key:"",aws_session_token:"",s3_signature_version:"",s3_region_name:"",s3_bucket_name:"",s3_endpoint_url:"",s3_hostname:"",uploadCount:1,errorMinute:1,errorCount:1});(()=>{g({url:"/admin/config/get",method:"get"}).then(p=>{l.value=p.detail})})();const f=()=>{g({url:"/admin/config/update",method:"patch",data:l.value}).then(p=>{p.code==200?v.success(n("admin.settings.saveSuccess")):v.error(p.message)})};return(p,a)=>{const u=U,d=z,r=S,_=h,y=k,x=w;return V(),D(x,null,{default:s(()=>[e(d,{size:"large",label:o(n)("admin.settings.name")},{default:s(()=>[e(u,{modelValue:l.value.name,"onUpdate:modelValue":a[0]||(a[0]=t=>l.value.name=t)},null,8,["modelValue"])]),_:1},8,["label"]),e(d,{size:"large",label:o(n)("admin.settings.description")},{default:s(()=>[e(u,{modelValue:l.value.description,"onUpdate:modelValue":a[1]||(a[1]=t=>l.value.description=t)},null,8,["modelValue"])]),_:1},8,["label"]),e(d,{size:"large",label:o(n)("admin.settings.keywords"),style:{"letter-spacing":"0.3rem"}},{default:s(()=>[e(u,{modelValue:l.value.keywords,"onUpdate:modelValue":a[2]||(a[2]=t=>l.value.keywords=t)},null,8,["modelValue"])]),_:1},8,["label"]),e(d,{size:"large",label:o(n)("admin.settings.notify_title")},{default:s(()=>[e(u,{modelValue:l.value.notify_title,"onUpdate:modelValue":a[3]||(a[3]=t=>l.value.notify_title=t)},null,8,["modelValue"])]),_:1},8,["label"]),e(d,{size:"large",label:o(n)("admin.settings.notify_content")},{default:s(()=>[e(u,{modelValue:l.value.notify_content,"onUpdate:modelValue":a[4]||(a[4]=t=>l.value.notify_content=t)},null,8,["modelValue"])]),_:1},8,["label"]),e(d,{size:"large",label:o(n)("admin.settings.background")},{default:s(()=>[i("span",N,[e(u,{modelValue:l.value.background,"onUpdate:modelValue":a[5]||(a[5]=t=>l.value.background=t),placeholder:"url"},null,8,["modelValue"])]),i("span",T,[b(" Opacity: "),e(u,{type:"number",modelValue:l.value.opacity,"onUpdate:modelValue":a[6]||(a[6]=t=>l.value.opacity=t)},null,8,["modelValue"])])]),_:1},8,["label"]),e(d,{size:"large",label:o(n)("admin.settings.showAdminAddr")},{default:s(()=>[e(_,{modelValue:l.value.showAdminAddr,"onUpdate:modelValue":a[7]||(a[7]=t=>l.value.showAdminAddr=t),style:{width:"80%"}},{default:s(()=>[e(r,{label:o(n)("admin.settings.showAdmin.open"),value:1},null,8,["label"]),e(r,{label:o(n)("admin.settings.showAdmin.close"),value:0},null,8,["label"])]),_:1},8,["modelValue"]),i("small",c,m(o(n)("admin.settings.showAdmin.note")),1)]),_:1},8,["label"]),e(d,{size:"large",label:"robots.Text"},{default:s(()=>[e(u,{type:"textarea",modelValue:l.value.robotsText,"onUpdate:modelValue":a[8]||(a[8]=t=>l.value.robotsText=t),placeholder:"explain"},null,8,["modelValue"])]),_:1}),e(d,{size:"large",label:o(n)("admin.settings.explain")},{default:s(()=>[e(u,{type:"textarea",modelValue:l.value.page_explain,"onUpdate:modelValue":a[9]||(a[9]=t=>l.value.page_explain=t),placeholder:"explain"},null,8,["modelValue"])]),_:1},8,["label"]),e(d,{size:"large",label:o(n)("admin.settings.admin_token")},{default:s(()=>[e(u,{type:"password",modelValue:l.value.admin_token,"onUpdate:modelValue":a[10]||(a[10]=t=>l.value.admin_token=t)},null,8,["modelValue"])]),_:1},8,["label"]),e(d,{size:"large",label:o(n)("admin.settings.uploadSize")},{append:s(()=>[]),default:s(()=>[e(u,{type:"number",modelValue:l.value.uploadSize,"onUpdate:modelValue":a[11]||(a[11]=t=>l.value.uploadSize=t)},null,8,["modelValue"]),i("small",null,"Bytesï¼š"+m(o(n)("admin.settings.uploadSizeNote")),1)]),_:1},8,["label"]),e(d,{size:"large",label:o(n)("admin.settings.max_save_seconds")},{default:s(()=>[e(u,{type:"number",modelValue:l.value.max_save_seconds,"onUpdate:modelValue":a[12]||(a[12]=t=>l.value.max_save_seconds=t)},null,8,["modelValue"]),i("small",null,"Seconds:"+m(o(n)("admin.settings.maxSaveSecondsNote")),1)]),_:1},8,["label"]),e(d,{size:"large",label:o(n)("admin.settings.expireStyle")},{default:s(()=>[e(_,{modelValue:l.value.expireStyle,"onUpdate:modelValue":a[13]||(a[13]=t=>l.value.expireStyle=t),multiple:"",style:{width:"100%"}},{default:s(()=>[e(r,{label:o(n)("send.expireData.day"),value:"day"},null,8,["label"]),e(r,{label:o(n)("send.expireData.hour"),value:"hour"},null,8,["label"]),e(r,{label:o(n)("send.expireData.minute"),value:"minute"},null,8,["label"]),e(r,{label:o(n)("send.expireData.forever"),value:"forever"},null,8,["label"]),e(r,{label:o(n)("send.expireData.count"),value:"count"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(d,{size:"large",label:o(n)("admin.settings.openUpload.title")},{default:s(()=>[e(_,{modelValue:l.value.openUpload,"onUpdate:modelValue":a[14]||(a[14]=t=>l.value.openUpload=t),style:{width:"80%"}},{default:s(()=>[e(r,{label:o(n)("admin.settings.openUpload.open"),value:1},null,8,["label"]),e(r,{label:o(n)("admin.settings.openUpload.close"),value:0},null,8,["label"])]),_:1},8,["modelValue"]),i("small",I,m(o(n)("admin.settings.openUpload.note")),1)]),_:1},8,["label"]),e(d,{size:"large",label:o(n)("admin.settings.file_storage.title")},{default:s(()=>[e(_,{modelValue:l.value.file_storage,"onUpdate:modelValue":a[15]||(a[15]=t=>l.value.file_storage=t),style:{width:"80%"}},{default:s(()=>[e(r,{label:o(n)("admin.settings.file_storage.local"),value:"local"},null,8,["label"]),e(r,{label:o(n)("admin.settings.file_storage.s3"),value:"s3"},null,8,["label"])]),_:1},8,["modelValue"]),i("small",F,m(o(n)("admin.settings.file_storage.note")),1)]),_:1},8,["label"]),l.value.file_storage==="s3"?(V(),B("div",K,[e(d,{size:"large",label:"S3 AccessKeyId"},{default:s(()=>[e(u,{modelValue:l.value.s3_access_key_id,"onUpdate:modelValue":a[16]||(a[16]=t=>l.value.s3_access_key_id=t)},null,8,["modelValue"])]),_:1}),e(d,{size:"large",label:"S3 SecretAccessKey"},{default:s(()=>[e(u,{modelValue:l.value.s3_secret_access_key,"onUpdate:modelValue":a[17]||(a[17]=t=>l.value.s3_secret_access_key=t)},null,8,["modelValue"])]),_:1}),e(d,{size:"large",label:"S3 BucketName"},{default:s(()=>[e(u,{modelValue:l.value.s3_bucket_name,"onUpdate:modelValue":a[18]||(a[18]=t=>l.value.s3_bucket_name=t)},null,8,["modelValue"])]),_:1}),e(d,{size:"large",label:"S3 EndpointUrl"},{default:s(()=>[e(u,{modelValue:l.value.s3_endpoint_url,"onUpdate:modelValue":a[19]||(a[19]=t=>l.value.s3_endpoint_url=t)},null,8,["modelValue"])]),_:1}),e(d,{size:"large",label:"S3 hostname"},{default:s(()=>[e(u,{modelValue:l.value.s3_hostname,"onUpdate:modelValue":a[20]||(a[20]=t=>l.value.s3_hostname=t)},null,8,["modelValue"])]),_:1}),e(d,{size:"large",label:"S3 region name"},{default:s(()=>[e(u,{modelValue:l.value.s3_region_name,"onUpdate:modelValue":a[21]||(a[21]=t=>l.value.s3_region_name=t)},null,8,["modelValue"])]),_:1}),e(d,{size:"large",label:"S3 Signature Version"},{default:s(()=>[e(u,{modelValue:l.value.s3_signature_version,"onUpdate:modelValue":a[22]||(a[22]=t=>l.value.s3_signature_version=t)},null,8,["modelValue"])]),_:1}),e(d,{size:"large",label:"Aws Session Token"},{default:s(()=>[e(u,{modelValue:l.value.aws_session_token,"onUpdate:modelValue":a[23]||(a[23]=t=>l.value.aws_session_token=t)},null,8,["modelValue"])]),_:1})])):M("",!0),e(d,{size:"large",label:o(n)("admin.settings.uploadlimit")},{default:s(()=>[i("span",O,[i("span",q,m(o(n)("admin.settings.mei")),1),e(u,{type:"number",modelValue:l.value.uploadMinute,"onUpdate:modelValue":a[24]||(a[24]=t=>l.value.uploadMinute=t)},null,8,["modelValue"]),i("span",G,m(o(n)("admin.settings.minute")),1)]),i("span",W,[i("span",Y,m(o(n)("admin.settings.upload")),1),e(u,{type:"number",modelValue:l.value.uploadCount,"onUpdate:modelValue":a[25]||(a[25]=t=>l.value.uploadCount=t)},null,8,["modelValue"]),i("span",Z,m(o(n)("admin.settings.files")),1)])]),_:1},8,["label"]),e(d,{size:"large",label:o(n)("admin.settings.errorlimit")},{default:s(()=>[i("span",$,[i("span",j,m(o(n)("admin.settings.mei")),1),e(u,{type:"number",modelValue:l.value.errorMinute,"onUpdate:modelValue":a[26]||(a[26]=t=>l.value.errorMinute=t)},null,8,["modelValue"]),i("span",H,m(o(n)("admin.settings.minute")),1)]),i("span",J,[i("span",L,m(o(n)("admin.settings.allow")),1),e(u,{type:"number",modelValue:l.value.errorCount,"onUpdate:modelValue":a[27]||(a[27]=t=>l.value.errorCount=t)},null,8,["modelValue"]),i("span",P,m(o(n)("admin.settings.errors")),1)])]),_:1},8,["label"]),e(d,null,{default:s(()=>[e(y,{onClick:f,type:"primary",style:{margin:"auto"}},{default:s(()=>[b(m(o(n)("admin.settings.save")),1)]),_:1})]),_:1})]),_:1})}}});export{se as default};
